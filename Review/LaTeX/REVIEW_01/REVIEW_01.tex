% Options for packages loaded elsewhere
\PassOptionsToPackage{unicode}{hyperref}
\PassOptionsToPackage{hyphens}{url}
%
\documentclass[
]{article}
\usepackage{amsmath,amssymb}
\usepackage{iftex}
\ifPDFTeX
  \usepackage[T1]{fontenc}
  \usepackage[utf8]{inputenc}
  \usepackage{textcomp} % provide euro and other symbols
\else % if luatex or xetex
  \usepackage{unicode-math} % this also loads fontspec
  \defaultfontfeatures{Scale=MatchLowercase}
  \defaultfontfeatures[\rmfamily]{Ligatures=TeX,Scale=1}
\fi
\usepackage{lmodern}
\ifPDFTeX\else
  % xetex/luatex font selection
\fi
% Use upquote if available, for straight quotes in verbatim environments
\IfFileExists{upquote.sty}{\usepackage{upquote}}{}
\IfFileExists{microtype.sty}{% use microtype if available
  \usepackage[]{microtype}
  \UseMicrotypeSet[protrusion]{basicmath} % disable protrusion for tt fonts
}{}
\makeatletter
\@ifundefined{KOMAClassName}{% if non-KOMA class
  \IfFileExists{parskip.sty}{%
    \usepackage{parskip}
  }{% else
    \setlength{\parindent}{0pt}
    \setlength{\parskip}{6pt plus 2pt minus 1pt}}
}{% if KOMA class
  \KOMAoptions{parskip=half}}
\makeatother
\usepackage{xcolor}
\usepackage{color}
\usepackage{fancyvrb}
\newcommand{\VerbBar}{|}
\newcommand{\VERB}{\Verb[commandchars=\\\{\}]}
\DefineVerbatimEnvironment{Highlighting}{Verbatim}{commandchars=\\\{\}}
% Add ',fontsize=\small' for more characters per line
\newenvironment{Shaded}{}{}
\newcommand{\AlertTok}[1]{\textcolor[rgb]{1.00,0.00,0.00}{\textbf{#1}}}
\newcommand{\AnnotationTok}[1]{\textcolor[rgb]{0.38,0.63,0.69}{\textbf{\textit{#1}}}}
\newcommand{\AttributeTok}[1]{\textcolor[rgb]{0.49,0.56,0.16}{#1}}
\newcommand{\BaseNTok}[1]{\textcolor[rgb]{0.25,0.63,0.44}{#1}}
\newcommand{\BuiltInTok}[1]{\textcolor[rgb]{0.00,0.50,0.00}{#1}}
\newcommand{\CharTok}[1]{\textcolor[rgb]{0.25,0.44,0.63}{#1}}
\newcommand{\CommentTok}[1]{\textcolor[rgb]{0.38,0.63,0.69}{\textit{#1}}}
\newcommand{\CommentVarTok}[1]{\textcolor[rgb]{0.38,0.63,0.69}{\textbf{\textit{#1}}}}
\newcommand{\ConstantTok}[1]{\textcolor[rgb]{0.53,0.00,0.00}{#1}}
\newcommand{\ControlFlowTok}[1]{\textcolor[rgb]{0.00,0.44,0.13}{\textbf{#1}}}
\newcommand{\DataTypeTok}[1]{\textcolor[rgb]{0.56,0.13,0.00}{#1}}
\newcommand{\DecValTok}[1]{\textcolor[rgb]{0.25,0.63,0.44}{#1}}
\newcommand{\DocumentationTok}[1]{\textcolor[rgb]{0.73,0.13,0.13}{\textit{#1}}}
\newcommand{\ErrorTok}[1]{\textcolor[rgb]{1.00,0.00,0.00}{\textbf{#1}}}
\newcommand{\ExtensionTok}[1]{#1}
\newcommand{\FloatTok}[1]{\textcolor[rgb]{0.25,0.63,0.44}{#1}}
\newcommand{\FunctionTok}[1]{\textcolor[rgb]{0.02,0.16,0.49}{#1}}
\newcommand{\ImportTok}[1]{\textcolor[rgb]{0.00,0.50,0.00}{\textbf{#1}}}
\newcommand{\InformationTok}[1]{\textcolor[rgb]{0.38,0.63,0.69}{\textbf{\textit{#1}}}}
\newcommand{\KeywordTok}[1]{\textcolor[rgb]{0.00,0.44,0.13}{\textbf{#1}}}
\newcommand{\NormalTok}[1]{#1}
\newcommand{\OperatorTok}[1]{\textcolor[rgb]{0.40,0.40,0.40}{#1}}
\newcommand{\OtherTok}[1]{\textcolor[rgb]{0.00,0.44,0.13}{#1}}
\newcommand{\PreprocessorTok}[1]{\textcolor[rgb]{0.74,0.48,0.00}{#1}}
\newcommand{\RegionMarkerTok}[1]{#1}
\newcommand{\SpecialCharTok}[1]{\textcolor[rgb]{0.25,0.44,0.63}{#1}}
\newcommand{\SpecialStringTok}[1]{\textcolor[rgb]{0.73,0.40,0.53}{#1}}
\newcommand{\StringTok}[1]{\textcolor[rgb]{0.25,0.44,0.63}{#1}}
\newcommand{\VariableTok}[1]{\textcolor[rgb]{0.10,0.09,0.49}{#1}}
\newcommand{\VerbatimStringTok}[1]{\textcolor[rgb]{0.25,0.44,0.63}{#1}}
\newcommand{\WarningTok}[1]{\textcolor[rgb]{0.38,0.63,0.69}{\textbf{\textit{#1}}}}
\usepackage{graphicx}
\makeatletter
\def\maxwidth{\ifdim\Gin@nat@width>\linewidth\linewidth\else\Gin@nat@width\fi}
\def\maxheight{\ifdim\Gin@nat@height>\textheight\textheight\else\Gin@nat@height\fi}
\makeatother
% Scale images if necessary, so that they will not overflow the page
% margins by default, and it is still possible to overwrite the defaults
% using explicit options in \includegraphics[width, height, ...]{}
\setkeys{Gin}{width=\maxwidth,height=\maxheight,keepaspectratio}
% Set default figure placement to htbp
\makeatletter
\def\fps@figure{htbp}
\makeatother
\setlength{\emergencystretch}{3em} % prevent overfull lines
\providecommand{\tightlist}{%
  \setlength{\itemsep}{0pt}\setlength{\parskip}{0pt}}
\setcounter{secnumdepth}{-\maxdimen} % remove section numbering
\ifLuaTeX
  \usepackage{selnolig}  % disable illegal ligatures
\fi
\IfFileExists{bookmark.sty}{\usepackage{bookmark}}{\usepackage{hyperref}}
\IfFileExists{xurl.sty}{\usepackage{xurl}}{} % add URL line breaks if available
\urlstyle{same}
\hypersetup{
  hidelinks,
  pdfcreator={LaTeX via pandoc}}

\author{}
\date{}

\begin{document}

\hypertarget{review-of-the-course-r-for-data-science-part-01talk-01-04}{%
\section{Review of the course ``R for Data Science'' Part 01(Talk
01\textasciitilde{}
04)}\label{review-of-the-course-r-for-data-science-part-01talk-01-04}}

\textbf{By Haoran Nie @ HUST Life ST}

\begin{quote}
Reference: \href{https://r4ds.had.co.nz}{R for Data Science}

The book updated to 2\textsuperscript{nd} ed. on July,2023, here' s a
\href{https://r4ds.hadley.nz}{link} to the official website.
\end{quote}

This work is licensed under CC BY-NC-SA 4.0

\hypertarget{multi-omics-data-analysis-and-visualisation-1}{%
\section{Multi-omics data analysis and visualisation,
\#1}\label{multi-omics-data-analysis-and-visualisation-1}}

\begin{quote}
Talk 01

View the original slide through \href{../talk01.pdf}{this link}.

View the original R markdown file of the slide through
\href{../talk01.Rmd}{this link}.
\end{quote}

This section has nothing to explain :)

\hypertarget{r-language-basics-part-1}{%
\section{R language basics, part 1}\label{r-language-basics-part-1}}

\begin{quote}
Talk 02

View the original slide through \href{../talk02.pdf}{this link}.

View the original R markdown file of the slide through
\href{../talk02.Rmd}{this link}.
\end{quote}

\hypertarget{fundamental-data-type}{%
\subsection{Fundamental Data Type}\label{fundamental-data-type}}

The most basic data types include \textbf{numbers}, \textbf{logical
symbols} and \textbf{strings} and are the basic building blocks of the
other data types.

\hypertarget{simple-data-types}{%
\subsection{Simple Data Types}\label{simple-data-types}}

This includes vectors and matrices, both of which can contain multiple
values of a certain basic data type, such as a \textbf{matrix}
consisting of multiple numbers, a \textbf{vector} consisting of multiple
strings, and so on. However, \textbf{they can only contain a single data
type.}

\begin{Shaded}
\begin{Highlighting}[]
\FunctionTok{c}\NormalTok{(}\DecValTok{100}\NormalTok{, }\DecValTok{20}\NormalTok{, }\DecValTok{30}\NormalTok{) }\DocumentationTok{\#\# Interger vector }
\FunctionTok{c}\NormalTok{(}\StringTok{"String"}\NormalTok{, }\StringTok{"Array"}\NormalTok{, }\StringTok{"It\textquotesingle{}s me"}\NormalTok{.) }\DocumentationTok{\#\# String vector}
\FunctionTok{c}\NormalTok{(}\ConstantTok{TRUE}\NormalTok{, }\ConstantTok{FALSE}\NormalTok{, }\ConstantTok{TRUE}\NormalTok{, T, F) }\DocumentationTok{\#\# A logic vector}
\end{Highlighting}
\end{Shaded}

As shown above, arrays are usually defined with the function
\texttt{c()}. In addition, a \texttt{vector} containing consecutive
integers can be defined using the \texttt{:} operator.

\hypertarget{conversion-between-data-types}{%
\subsection{Conversion between data
types}\label{conversion-between-data-types}}

\begin{enumerate}
\def\labelenumi{\arabic{enumi}.}
\item
  Automatic Conversion

  A \texttt{vector} can contain only one basic data type. Therefore,
  when defining arrays, if the input values are mixed, certain basic
  data types are automatically converted to other types to ensure
  consistency of the numeric types; this is called \texttt{coerce} in
  English, and has the meaning of forced conversion. The priority of
  this conversion is:

  \begin{itemize}
  \item
    Logical types -\textgreater{} numeric types
  \item
    Logical Type -\textgreater{} String
  \item
    numeric type -\textgreater{} string
  \end{itemize}
\item
  Manual switchover

  In addition to the automatic conversion, you can manually convert the
  types of the elements in a vector:

  \begin{itemize}
  \item
    Checking the type of a variable \texttt{class()}
  \item
    Checking of classes \texttt{is.type()}
  \item
    Conversion of classes \texttt{as.type()}
  \end{itemize}
\end{enumerate}

\hypertarget{some-special-values-in-matrices}{%
\subsection{Some special values in
matrices}\label{some-special-values-in-matrices}}

\begin{itemize}
\item
  \texttt{NA} (Not Available) missing values
\item
  \texttt{NaN} (Not a Number)is meaningless
\item
  \texttt{-Inf} Negative Infinity
\item
  \texttt{Inf} Positive Infinity
\item
  \texttt{NULL} Null
\end{itemize}

Some functions to determine these special values:

\begin{itemize}
\item
  \texttt{is.na()}
\item
  \texttt{is.finite()}
\item
  \texttt{is.infinite()}
\end{itemize}

\hypertarget{vectors-and-arrays}{%
\subsection{Vectors and Arrays}\label{vectors-and-arrays}}

Both are arrays. A \texttt{vector} is a one-dimensional array and a
matrix is a two-dimensional array.

This means.

\begin{itemize}
\item
  There can be more dimensional arrays
\item
  High-dimensional arrays, like \texttt{vector} and matrices, can
  contain only one basic data type.
\item
  Higher dimensional arrays can be defined by the \texttt{array()}
  function.
\end{itemize}

\hypertarget{vector-maniulation}{%
\subsubsection{Vector maniulation}\label{vector-maniulation}}

\begin{Shaded}
\begin{Highlighting}[]
\FunctionTok{dim}\NormalTok{(m);}
\FunctionTok{nrow}\NormalTok{(m);}
\FunctionTok{ncol}\NormalTok{(m);}
\FunctionTok{range}\NormalTok{(m); }\DocumentationTok{\#\# Available when the content is numeric}
\FunctionTok{summary}\NormalTok{(m); }\DocumentationTok{\#\# Can also be used in vector}
\end{Highlighting}
\end{Shaded}

Extra:

\begin{itemize}
\item
  Incorporation \texttt{ab\ =\ c(a,\ b)}
\item
  Take part \texttt{ab{[}1{]}}
\item
  Replacement of individual values \texttt{ab{[}1{]}\ =\ c}
\item
  Replacing multiple values
  \texttt{ab{[}c(2,\ 3){]}\ =\ c("Weihua",\ "Chen")}
\item
  Naming elements and replace values
  \texttt{names(ab)\ =\ as.character(ab)}
\item
  Reverse \texttt{rev(1:10)}
\item
  Sort\&order

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{lts }\OtherTok{=} \FunctionTok{sample}\NormalTok{(LETTERS[}\DecValTok{1}\SpecialCharTok{:}\DecValTok{20}\NormalTok{])}
\FunctionTok{sort}\NormalTok{(lts)}
\end{Highlighting}
\end{Shaded}
\item
  Fetch one line or multiple lines

\begin{Shaded}
\begin{Highlighting}[]
\CommentTok{\# (There\textquotesingle{}s already some data in workspace)}

\SpecialCharTok{$}\NormalTok{ m}
\SpecialCharTok{\textgreater{}}\NormalTok{ (List the content of matrix }\StringTok{"m"}\NormalTok{)}

\SpecialCharTok{$}\NormalTok{ m[}\DecValTok{1}\NormalTok{, ]}
\SpecialCharTok{\textgreater{}}\NormalTok{ (List the first row of matrix }\StringTok{\textquotesingle{}m\textquotesingle{}}\NormalTok{)}

\SpecialCharTok{$}\NormalTok{ m[}\DecValTok{1}\SpecialCharTok{:}\DecValTok{2}\NormalTok{, ]}
\SpecialCharTok{\textgreater{}}\NormalTok{ (List the first two rows of matrix }\StringTok{\textquotesingle{}m\textquotesingle{}}\NormalTok{)}
\end{Highlighting}
\end{Shaded}

  \begin{quote}
  You can also let the console to fetch multiple lines as the order you
  give.

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{m[}\FunctionTok{c}\NormalTok{(}\StringTok{"row\_B"}\NormalTok{, }\StringTok{"row\_A"}\NormalTok{)]}
\end{Highlighting}
\end{Shaded}

  The console will output the contents of matrix "m" in the order of
  "row\_B" and then "row\_A".
  \end{quote}
\item
  Fetch one column or multiple columns

  \begin{quote}
  As can be seen from the same principle, I only list codes here
  \end{quote}

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{m[ , }\DecValTok{1}\NormalTok{]}
\NormalTok{m[ , }\FunctionTok{c}\NormalTok{(}\DecValTok{1}\SpecialCharTok{:}\DecValTok{2}\NormalTok{)]}
\NormalTok{m[ , }\FunctionTok{c}\NormalTok{(}\StringTok{"col\_B"}\NormalTok{, }\StringTok{"col\_A"}\NormalTok{)]}
\end{Highlighting}
\end{Shaded}
\item
  Fetch parts \texttt{m{[}1:2,\ 2:3{]}}
\item
  Replacement

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{m[}\DecValTok{1}\NormalTok{, ] }\OtherTok{=} \FunctionTok{c}\NormalTok{(}\DecValTok{10}\NormalTok{)}
\NormalTok{m[, }\StringTok{"C"}\NormalTok{] }\OtherTok{=} \FunctionTok{c}\NormalTok{(}\DecValTok{230}\NormalTok{, }\DecValTok{140}\NormalTok{)}
\NormalTok{m[}\DecValTok{1}\SpecialCharTok{:}\DecValTok{2}\NormalTok{,] }\OtherTok{=} \FunctionTok{matrix}\NormalTok{( }\DecValTok{1}\SpecialCharTok{:}\DecValTok{6}\NormalTok{, }\AttributeTok{nrow=}\DecValTok{2}\NormalTok{)}
\NormalTok{m[}\DecValTok{1}\NormalTok{, }\FunctionTok{c}\NormalTok{(}\StringTok{"C"}\NormalTok{, }\StringTok{"B"}\NormalTok{)] }\OtherTok{=} \FunctionTok{matrix}\NormalTok{(}\DecValTok{110}\SpecialCharTok{:}\DecValTok{111}\NormalTok{, }\AttributeTok{nrow =} \DecValTok{1}\NormalTok{)}
\end{Highlighting}
\end{Shaded}
\item
  Transparent \texttt{t(m)}
\end{itemize}

\hypertarget{the-hierarchy-of-rs-vector-types}{%
\subsection{The hierarchy of R's vector
types}\label{the-hierarchy-of-rs-vector-types}}

\includegraphics{/Users/lucas/Library/Mobile Documents/com~apple~CloudDocs/~~aa Study Materials/Grade 2 I/Learning/R for Data Science/R-for-Data-Science/Review/image/data-structures-overview.png}

You can use function \texttt{typeof()} to know the type of a vector.

Here are some examples of other \texttt{is.xxx()} function:

\begin{Shaded}
\begin{Highlighting}[]
\FunctionTok{is.null}\NormalTok{( }\ConstantTok{NULL}\NormalTok{ )}
\FunctionTok{is.numeric}\NormalTok{( }\ConstantTok{NA}\NormalTok{ )}
\FunctionTok{is.numeric}\NormalTok{( }\ConstantTok{Inf}\NormalTok{ );}
\FunctionTok{is.list}\NormalTok{(); }\CommentTok{\# This is a function which can take the place of "typeof()"}
\FunctionTok{is.logical}\NormalTok{()}
\FunctionTok{is.character}\NormalTok{()}
\FunctionTok{is.vector}\NormalTok{();}
\CommentTok{\# more ...}
\end{Highlighting}
\end{Shaded}

\hypertarget{r-language-basics-part-2}{%
\section{R language basics, part 2}\label{r-language-basics-part-2}}

\begin{quote}
Talk 03

View the original slide through \href{../talk03.pdf}{this link}.

View the original R markdown file of the slide through
\href{../talk03.Rmd}{this link}.
\end{quote}

\hypertarget{dataframe}{%
\subsection{\texorpdfstring{\texttt{data.frame}}{data.frame}}\label{dataframe}}

\hypertarget{what-is-a-dataframe}{%
\subsubsection{\texorpdfstring{\textbf{What is a
\texttt{data.frame}?}}{What is a data.frame?}}\label{what-is-a-dataframe}}

\begin{Shaded}
\begin{Highlighting}[]
\FunctionTok{library}\NormalTok{(tidyverse);}
\FunctionTok{library}\NormalTok{(kableExtra)}
\FunctionTok{kbl}\NormalTok{(}\FunctionTok{head}\NormalTok{(mpg), }
    \AttributeTok{booktabs =}\NormalTok{ T)}
\end{Highlighting}
\end{Shaded}

Here's the result:

\includegraphics{/Users/lucas/Library/Mobile Documents/com~apple~CloudDocs/~~aa Study Materials/Grade 2 I/Learning/R for Data Science/R-for-Data-Science/Review/image/Introduction of df.png}

\hypertarget{usage-of-head-and-tail}{%
\subsubsection{\texorpdfstring{\textbf{Usage of \texttt{head()} and
\texttt{tail()}}}{Usage of head() and tail()}}\label{usage-of-head-and-tail}}

\begin{itemize}
\item
  \texttt{head()} is a function to display the first rows of some data
  (vectors etc.)
\item
  \texttt{tail()} is a function to display the last rows of some data
  (vectors etc.)
\end{itemize}

\hypertarget{components-of-dataframe-and-common-functions}{%
\subsubsection{\texorpdfstring{Components of \texttt{data.frame} and
common
functions}{Components of data.frame and common functions}}\label{components-of-dataframe-and-common-functions}}

\textbf{Components:}

\begin{itemize}
\item
  Two-dimensional table
\item
  consists of different columns; each column is a vector, different
  columns can have different data types, but a column contains only one
  data type (\texttt{int}, \texttt{num}, \texttt{chr} ...)
\item
  Each column has the same length
\end{itemize}

\textbf{Common functions:}

\begin{Shaded}
\begin{Highlighting}[]
\FunctionTok{nrow}\NormalTok{() }\CommentTok{\# Show the number of rows}
\FunctionTok{ncol}\NormalTok{() }\CommentTok{\# Show the number of columns}
\FunctionTok{dim}\NormalTok{()  }\CommentTok{\# Show the dimension}
\end{Highlighting}
\end{Shaded}

\hypertarget{structure-of-dataframe--tibble}{%
\subsubsection{\texorpdfstring{Structure of \texttt{data.frame} \&
\texttt{tibble}}{Structure of data.frame \& tibble}}\label{structure-of-dataframe--tibble}}

\texttt{str(mpg)}

This command shows the structure of the tibble \texttt{mpg}:

\includegraphics{/Users/lucas/Library/Mobile Documents/com~apple~CloudDocs/~~aa Study Materials/Grade 2 I/Learning/R for Data Science/R-for-Data-Science/Review/image/Structure of mpg.png}

\hypertarget{make-a-new-dataframe}{%
\subsubsection{\texorpdfstring{Make a new
\texttt{data.frame}}{Make a new data.frame}}\label{make-a-new-dataframe}}

You can use the function \texttt{data.frame()} to make a new
\texttt{data.frame}

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{data2 }\OtherTok{=}
	\FunctionTok{data.frame}\NormalTok{(}
  	\AttributeTok{data =} \FunctionTok{sample}\NormalTok{(}\DecValTok{1}\SpecialCharTok{:}\DecValTok{100}\NormalTok{, }\DecValTok{10}\NormalTok{),}
    \AttributeTok{group =} \FunctionTok{sample}\NormalTok{(LETTERS[}\DecValTok{1}\SpecialCharTok{:}\DecValTok{3}\NormalTok{], }\DecValTok{10}\NormalTok{, }\AttributeTok{replace =} \ConstantTok{TRUE}\NormalTok{)}
    \AttributeTok{data2 =} \FloatTok{0.1}
\NormalTok{  )}
\end{Highlighting}
\end{Shaded}

\hypertarget{how-to-add-rowscols-to-an-existing-dataframe}{%
\subsubsection{How to add row(s)/col(s) to an existing
data.frame}\label{how-to-add-rowscols-to-an-existing-dataframe}}

Create the "table header" first, then populate the \texttt{data.frame}

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{df2 }\OtherTok{=}
	\FunctionTok{data.frame}\NormalTok{( }
    \AttributeTok{x =} \FunctionTok{character}\NormalTok{(), }
    \AttributeTok{y =} \FunctionTok{integer}\NormalTok{(), }
    \AttributeTok{z =} \FunctionTok{double}\NormalTok{() , }
    \AttributeTok{stringsAsFactors =} \ConstantTok{FALSE} 
\NormalTok{  )}

\NormalTok{df2 }\OtherTok{=}
	\FunctionTok{rbind}\NormalTok{( }
\NormalTok{    df2, }
    \FunctionTok{data.frame}\NormalTok{(}
      \AttributeTok{x =} \StringTok{"a"}\NormalTok{,}
      \AttributeTok{y =}\NormalTok{ 1L, }
      \AttributeTok{z =} \FloatTok{2.2} 
\NormalTok{    ) }
\NormalTok{  )}

\NormalTok{df2 }\OtherTok{=}
	\FunctionTok{rbind}\NormalTok{( }
\NormalTok{    df2, }
    \FunctionTok{data.frame}\NormalTok{( }
      \AttributeTok{x =} \StringTok{"b"}\NormalTok{, }
      \AttributeTok{y =} \DecValTok{2}\NormalTok{, }
      \AttributeTok{z =} \FloatTok{4.4} 
\NormalTok{    ) }
\NormalTok{  )}
\end{Highlighting}
\end{Shaded}

\textbf{ATTENTION}

\begin{itemize}
\item
  Use \texttt{rbind()} function to add rows, use \texttt{cbind()}
  function to add columns.
\item
  Define the new line using \texttt{data.frame()} function, the "header"
  needs to be the same as the merged table.
\end{itemize}

You can also use these functions to bind several data.frames.

\hypertarget{tibble}{%
\subsection{\texorpdfstring{\texttt{tibble}}{tibble}}\label{tibble}}

\texttt{tibble} is kind of similar to \texttt{data.frame}.

\hypertarget{make-new-tibble}{%
\subsubsection{\texorpdfstring{Make new
\texttt{tibble}}{Make new tibble}}\label{make-new-tibble}}

\texttt{tibble} related functionality is provided by the \texttt{tibble}
or \texttt{tidiverse} packages.

Almost all of the functions that you'll use in this book produce
tibbles, as tibbles are one of the unifying features of the tidyverse.
Most other R packages use regular data frames, so you might want to
coerce a data frame to a tibble. You can do that with
\texttt{as\_tibble()}:

\begin{Shaded}
\begin{Highlighting}[]
\FunctionTok{as\_tibble}\NormalTok{(iris)}
\CommentTok{\#\textgreater{} \# A tibble: 150 × 5}
\CommentTok{\#\textgreater{}   Sepal.Length Sepal.Width Petal.Length Petal.Width Species}
\CommentTok{\#\textgreater{}          \textless{}dbl\textgreater{}       \textless{}dbl\textgreater{}        \textless{}dbl\textgreater{}       \textless{}dbl\textgreater{} \textless{}fct\textgreater{}  }
\CommentTok{\#\textgreater{} 1          5.1         3.5          1.4         0.2 setosa }
\CommentTok{\#\textgreater{} 2          4.9         3            1.4         0.2 setosa }
\CommentTok{\#\textgreater{} 3          4.7         3.2          1.3         0.2 setosa }
\CommentTok{\#\textgreater{} 4          4.6         3.1          1.5         0.2 setosa }
\CommentTok{\#\textgreater{} 5          5           3.6          1.4         0.2 setosa }
\CommentTok{\#\textgreater{} 6          5.4         3.9          1.7         0.4 setosa }
\CommentTok{\#\textgreater{} \# ℹ 144 more rows}
\end{Highlighting}
\end{Shaded}

Another way to create a tibble is with \texttt{tribble()}, short for
\textbf{tr}ansposed tibble. \texttt{tribble()} is customised for data
entry in code: column headings are defined by formulas (i.e. they start
with \texttt{\textasciitilde{}}), and entries are separated by commas.
This makes it possible to lay out small amounts of data in easy to read
form.

\begin{Shaded}
\begin{Highlighting}[]
\FunctionTok{tribble}\NormalTok{(}
  \SpecialCharTok{\textasciitilde{}}\NormalTok{x, }\SpecialCharTok{\textasciitilde{}}\NormalTok{y, }\SpecialCharTok{\textasciitilde{}}\NormalTok{z,}
  \CommentTok{\#{-}{-}|{-}{-}|{-}{-}{-}{-}}
  \StringTok{"a"}\NormalTok{, }\DecValTok{2}\NormalTok{, }\FloatTok{3.6}\NormalTok{,}
  \StringTok{"b"}\NormalTok{, }\DecValTok{1}\NormalTok{, }\FloatTok{8.5}
\NormalTok{)}
\CommentTok{\#\textgreater{} \# A tibble: 2 × 3}
\CommentTok{\#\textgreater{}   x         y     z}
\CommentTok{\#\textgreater{}   \textless{}chr\textgreater{} \textless{}dbl\textgreater{} \textless{}dbl\textgreater{}}
\CommentTok{\#\textgreater{} 1 a         2   3.6}
\CommentTok{\#\textgreater{} 2 b         1   8.5}
\end{Highlighting}
\end{Shaded}

\begin{itemize}
\item
  \texttt{add\_row()}
\item
  \texttt{add\_column()}
\end{itemize}

\hypertarget{manipulate-the-tibble}{%
\subsubsection{Manipulate the tibble}\label{manipulate-the-tibble}}

\begin{quote}
See ``Manipulate the \texttt{data.frame}''
\end{quote}

\hypertarget{tibble-to-dataframe}{%
\subsubsection{\texorpdfstring{\texttt{tibble} to
\texttt{data.frame}}{tibble to data.frame}}\label{tibble-to-dataframe}}

\begin{itemize}
\item
  \texttt{as.data.frame()}
\item
  \texttt{as\_tibble()}
\end{itemize}

\textbf{e.g.}

\begin{Shaded}
\begin{Highlighting}[]
\FunctionTok{library}\NormalTok{(tibble)}
\FunctionTok{as.data.frame}\NormalTok{(}\FunctionTok{head}\NormalTok{(}\FunctionTok{as\_tibble}\NormalTok{(iris)))}
\end{Highlighting}
\end{Shaded}

\hypertarget{differences-between-tibble-and-dataframe}{%
\subsection{Differences between tibble and
data.frame}\label{differences-between-tibble-and-dataframe}}

\hypertarget{tibble-evaluates-columns-sequentially}{%
\subsubsection{Tibble evaluates columns
sequentially}\label{tibble-evaluates-columns-sequentially}}

\begin{Shaded}
\begin{Highlighting}[]
\FunctionTok{rm}\NormalTok{(x,y) }\CommentTok{\# Delete possible x, y}
\FunctionTok{tibble}\NormalTok{(}\AttributeTok{x =} \DecValTok{1}\SpecialCharTok{:}\DecValTok{5}\NormalTok{, }\AttributeTok{y =}\NormalTok{ xˆ2); }\CommentTok{\# You can do this with tibble}
\FunctionTok{data.frame}\NormalTok{(}\AttributeTok{x =} \DecValTok{1}\SpecialCharTok{:}\DecValTok{5}\NormalTok{, }\AttributeTok{y =}\NormalTok{ x ˆ }\DecValTok{2}\NormalTok{); }\CommentTok{\# But data.frame doesn\textquotesingle{}t work.}
\end{Highlighting}
\end{Shaded}

\hypertarget{dataframe-causes-trouble-when-fetching-subset-operations}{%
\subsubsection{\texorpdfstring{\texttt{data.frame} causes trouble when
fetching \texttt{subset}
operations}{data.frame causes trouble when fetching subset operations}}\label{dataframe-causes-trouble-when-fetching-subset-operations}}

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{df1 }\OtherTok{=}
	\FunctionTok{data.frame}\NormalTok{(}\AttributeTok{x =} \DecValTok{1}\SpecialCharTok{:}\DecValTok{3}\NormalTok{, }\AttributeTok{y =} \DecValTok{3}\SpecialCharTok{:}\DecValTok{1}\NormalTok{)}
\FunctionTok{class}\NormalTok{(df1[, }\DecValTok{1}\SpecialCharTok{:}\DecValTok{2}\NormalTok{])}

\CommentTok{\#\textgreater{} [1] "data.frame"}

\CommentTok{\# Subset operation :takes a column and expects a data.frame () }
\FunctionTok{class}\NormalTok{(df1[, }\DecValTok{1}\NormalTok{]) }\CommentTok{\# The result is a vector ...}

\CommentTok{\#\textgreater{} [1] "integer"}

\DocumentationTok{\#\# Tibble doesn\textquotesingle{}t.}
\NormalTok{df2 }\OtherTok{=}
	\FunctionTok{tibble}\NormalTok{(}\AttributeTok{x =} \DecValTok{1}\SpecialCharTok{:}\DecValTok{3}\NormalTok{, }\AttributeTok{y =} \DecValTok{3}\SpecialCharTok{:}\DecValTok{1}\NormalTok{)}
\FunctionTok{class}\NormalTok{(df2[, }\DecValTok{1}\NormalTok{]) }\DocumentationTok{\#\# Tibble forever}

\CommentTok{\#\textgreater{} [1] "tbl\_df" "tbl" "data.frame"}
\end{Highlighting}
\end{Shaded}

\hypertarget{tibble-allows-controlled-data-type-conversion}{%
\subsubsection{\texorpdfstring{\texttt{tibble} allows controlled data
type
conversion}{tibble allows controlled data type conversion}}\label{tibble-allows-controlled-data-type-conversion}}

\begin{quote}
There's no proper example here.

:\_(
\end{quote}

\hypertarget{recycling}{%
\subsubsection{Recycling}\label{recycling}}

\begin{Shaded}
\begin{Highlighting}[]
\FunctionTok{data.frame}\NormalTok{(}\AttributeTok{a =} \DecValTok{1}\SpecialCharTok{:}\DecValTok{6}\NormalTok{, }\AttributeTok{b =}\NormalTok{ LETTERS[}\DecValTok{1}\SpecialCharTok{:}\DecValTok{2}\NormalTok{]) }\CommentTok{\# data.frame CAN!!!}
\end{Highlighting}
\end{Shaded}

\textbf{OUTPUT}

\begin{Shaded}
\begin{Highlighting}[]
\CommentTok{\#   a b }
\CommentTok{\# 1 1 A }
\CommentTok{\# 2 2 B }
\CommentTok{\# 3 3 A }
\CommentTok{\# 4 4 B }
\CommentTok{\# 5 5 A }
\CommentTok{\# 6 6 B}
\end{Highlighting}
\end{Shaded}

\begin{Shaded}
\begin{Highlighting}[]
\FunctionTok{tibble}\NormalTok{(}\AttributeTok{a =} \DecValTok{1}\SpecialCharTok{:}\DecValTok{6}\NormalTok{, }\AttributeTok{b =}\NormalTok{ LETTERS[}\DecValTok{1}\SpecialCharTok{:}\DecValTok{2}\NormalTok{]); }\DocumentationTok{\#\# But tibble CAN\textquotesingle{}T!!!}
\end{Highlighting}
\end{Shaded}

\textbf{OUTPUT}

\begin{Shaded}
\begin{Highlighting}[]
\CommentTok{\# Error:}
\CommentTok{\# ! Tibble columns must have compatible sizes. \#\# * Size 6: Existing data.}
\CommentTok{\# * Size 2: Column \textasciigrave{}b\textasciigrave{}.}
\CommentTok{\# ℹ Only values of size one are recycled.}
\end{Highlighting}
\end{Shaded}

\textbf{ATTENTION!}

\textbf{The recycling of \texttt{tibble} is limited to lengths of 1 or
equal; \texttt{data.frame} is just divisible.}

\hypertarget{dataframe-will-do-partial-matching-while-tibble-will-never-do-it}{%
\subsubsection{\texorpdfstring{\texttt{data.frame} will do partial
matching, while \texttt{tibble} will \textbf{NEVER} do
it.}{data.frame will do partial matching, while tibble will NEVER do it.}}\label{dataframe-will-do-partial-matching-while-tibble-will-never-do-it}}

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{df }\OtherTok{=} \FunctionTok{data.frame}\NormalTok{(}\AttributeTok{abc =} \DecValTok{1}\NormalTok{) }
\NormalTok{df}\SpecialCharTok{$}\NormalTok{ab; }\CommentTok{\# Unwanted result ...}

\NormalTok{df2 }\OtherTok{=} \FunctionTok{tibble}\NormalTok{(}\AttributeTok{abc =} \DecValTok{1}\NormalTok{)}
\NormalTok{df2}\SpecialCharTok{$}\NormalTok{a; }\CommentTok{\# Produce a warning and return NULL}
\end{Highlighting}
\end{Shaded}

\textbf{OUTPUT}

\begin{Shaded}
\begin{Highlighting}[]
\CommentTok{\# Warning: Unknown or uninitialised column: \textasciigrave{}a\textasciigrave{}. }
\CommentTok{\# NULL}
\end{Highlighting}
\end{Shaded}

\hypertarget{advanced-tips-for-using-dataframe-and-tibble}{%
\subsection{\texorpdfstring{Advanced tips for using \texttt{data.frame}
and
\texttt{tibble}}{Advanced tips for using data.frame and tibble}}\label{advanced-tips-for-using-dataframe-and-tibble}}

\begin{itemize}
\item
  \texttt{attach()}
\item
  \texttt{detach()}
\item
  \texttt{with()}
\item
  \texttt{within()}
\end{itemize}

\begin{quote}
Following is the introduction (Produced by ChatGPT)
\end{quote}

These functions---\texttt{attach()}, \texttt{detach()}, \texttt{with()},
and \texttt{within()}---are incredibly useful when working with data
frames or tibbles in R, aiding in smoother workflows and code
readability. Here\textquotesingle s a breakdown of their functionality:

\hypertarget{attach-and-detach}{%
\subsubsection{\texorpdfstring{\texttt{attach()} and
\texttt{detach()}}{attach() and detach()}}\label{attach-and-detach}}

\begin{itemize}
\item
  \textbf{Purpose}: These functions allow you to temporarily attach a
  data frame to the search path, making its columns directly accessible
  by their names.
\item
  \textbf{Usage}:

  \begin{itemize}
  \item
    \texttt{attach(df)} attaches the specified data frame \texttt{df}.
  \item
    \texttt{detach(df)} detaches the specified data frame \texttt{df}.
  \end{itemize}
\item
  \textbf{Example}:

\begin{Shaded}
\begin{Highlighting}[]
\FunctionTok{data}\NormalTok{(mtcars) }\CommentTok{\# Loading a sample dataset}
\FunctionTok{attach}\NormalTok{(mtcars) }\CommentTok{\# Attaching mtcars}

\CommentTok{\# Now, columns can be accessed directly}
\FunctionTok{summary}\NormalTok{(mpg)}
\FunctionTok{mean}\NormalTok{(mpg)}

\FunctionTok{detach}\NormalTok{(mtcars) }\CommentTok{\# Detaching mtcars}
\end{Highlighting}
\end{Shaded}
\item
  \textbf{Note}: While convenient, using \texttt{attach()} can sometimes
  lead to confusion or unintended consequences, such as masking
  variables in your environment. It\textquotesingle s often recommended
  to avoid using \texttt{attach()} due to potential side effects.
\end{itemize}

\hypertarget{with}{%
\subsubsection{\texorpdfstring{\texttt{with()}}{with()}}\label{with}}

\begin{itemize}
\item
  \textbf{Purpose}: \texttt{with()} allows you to execute expressions in
  an environment where the data frame\textquotesingle s columns can be
  referenced without using \texttt{\$}.
\item
  \textbf{Usage}:

  \begin{itemize}
  \item
    \texttt{with(data,\ expr)} evaluates \texttt{expr} in the context of
    the specified data frame \texttt{data}.
  \end{itemize}
\item
  \textbf{Example}:

\begin{Shaded}
\begin{Highlighting}[]
\FunctionTok{data}\NormalTok{(mtcars) }\CommentTok{\# Loading a sample dataset}

\FunctionTok{with}\NormalTok{(mtcars, \{}
  \FunctionTok{mean}\NormalTok{(mpg)}
  \FunctionTok{summary}\NormalTok{(cyl)}
\NormalTok{  \})}
\end{Highlighting}
\end{Shaded}
\item
  \textbf{Advantage}: It helps avoid repetitive use of the data frame
  name while working with its columns.
\end{itemize}

\hypertarget{within}{%
\subsubsection{\texorpdfstring{\texttt{within()}}{within()}}\label{within}}

\begin{itemize}
\item
  \textbf{Purpose}: Similar to \texttt{with()}, \texttt{within()} allows
  modification of a data frame by evaluating expressions within it.
\item
  \textbf{Usage}:

  \begin{itemize}
  \item
    \texttt{within(data,\ expr)} modifies \texttt{data} according to
    \texttt{expr} and returns the modified data frame.
  \end{itemize}
\item
  \textbf{Example}:

\begin{Shaded}
\begin{Highlighting}[]
\FunctionTok{data}\NormalTok{(mtcars) }\CommentTok{\# Loading a sample dataset}

\NormalTok{modified\_mtcars }\OtherTok{\textless{}{-}} \FunctionTok{within}\NormalTok{(mtcars, \{}
\NormalTok{  mpg\_square }\OtherTok{\textless{}{-}}\NormalTok{ mpg}\SpecialCharTok{\^{}}\DecValTok{2}
\NormalTok{  hp\_doubled }\OtherTok{\textless{}{-}}\NormalTok{ hp }\SpecialCharTok{*} \DecValTok{2}
\NormalTok{  \})}
\FunctionTok{head}\NormalTok{(modified\_mtcars) }\CommentTok{\# Checking the modified data frame}
\end{Highlighting}
\end{Shaded}
\item
  \textbf{Advantage}: \texttt{within()} is useful when you want to
  create or modify columns within the data frame without having to
  repeatedly refer to the data frame name.
\end{itemize}

Remember, while these functions can streamline your code,
it\textquotesingle s crucial to use them judiciously to avoid unexpected
behavior or cluttering your global environment.

Here\textquotesingle s the console print output for the examples
provided earlier:

\begin{Shaded}
\begin{Highlighting}[]
\CommentTok{\# Using attach() and detach()}
\FunctionTok{data}\NormalTok{(mtcars) }\CommentTok{\# Loading a sample dataset}
\FunctionTok{attach}\NormalTok{(mtcars) }\CommentTok{\# Attaching mtcars}

\CommentTok{\# Now, columns can be accessed directly}
\FunctionTok{summary}\NormalTok{(mpg)}
\CommentTok{\# Output:}
\CommentTok{\#    Min. 1st Qu.  Median    Mean 3rd Qu.    Max. }
\CommentTok{\#  10.40   15.43   19.20   20.09   22.80   33.90 }

\FunctionTok{mean}\NormalTok{(mpg)}
\CommentTok{\# Output:}
\CommentTok{\# [1] 20.09062}

\FunctionTok{detach}\NormalTok{(mtcars) }\CommentTok{\# Detaching mtcars}

\CommentTok{\# Using with()}
\FunctionTok{data}\NormalTok{(mtcars) }\CommentTok{\# Loading a sample dataset}

\FunctionTok{with}\NormalTok{(mtcars, \{}
  \FunctionTok{mean}\NormalTok{(mpg)}
  \CommentTok{\# Output:}
  \CommentTok{\# [1] 20.09062}
  
  \FunctionTok{summary}\NormalTok{(cyl)}
  \CommentTok{\# Output:}
  \CommentTok{\#   Min. 1st Qu.  Median    Mean 3rd Qu.    Max. }
  \CommentTok{\#   4.00   4.00    6.00    6.188   8.00    8.00 }
\NormalTok{\})}

\CommentTok{\# Using within()}
\FunctionTok{data}\NormalTok{(mtcars) }\CommentTok{\# Loading a sample dataset}

\NormalTok{modified\_mtcars }\OtherTok{\textless{}{-}} \FunctionTok{within}\NormalTok{(mtcars, \{}
\NormalTok{  mpg\_square }\OtherTok{\textless{}{-}}\NormalTok{ mpg}\SpecialCharTok{\^{}}\DecValTok{2}
\NormalTok{  hp\_doubled }\OtherTok{\textless{}{-}}\NormalTok{ hp }\SpecialCharTok{*} \DecValTok{2}
\NormalTok{\})}
\FunctionTok{head}\NormalTok{(modified\_mtcars) }\CommentTok{\# Checking the modified data frame}
\CommentTok{\# Output:}
\CommentTok{\#                    mpg cyl disp  hp drat    wt  qsec vs am gear carb mpg\_square hp\_doubled}
\CommentTok{\# Mazda RX4         21.0   6  160 110 3.90 2.620 16.46  0  1    4    4     441.00       220}
\CommentTok{\# Mazda RX4 Wag     21.0   6  160 110 3.90 2.875 17.02  0  1    4    4     441.00       220}
\CommentTok{\# Datsun 710        22.8   4  108  93 3.85 2.320 18.61  1  1    4    1     519.84       186}
\CommentTok{\# Hornet 4 Drive    21.4   6  258 110 3.08 3.215 19.44  1  0    3    1     457.96       220}
\CommentTok{\# Hornet Sportabout 18.7   8  360 175 3.15 3.440 17.02  0  0    3    2     349.69       350}
\CommentTok{\# Valiant           18.1   6  225 105 2.76 3.460 20.22  1  0    3    1     327.61       210}
\end{Highlighting}
\end{Shaded}

\hypertarget{file-io}{%
\subsection{File IO}\label{file-io}}

\hypertarget{read-from-files}{%
\subsubsection{Read from files}\label{read-from-files}}

Using functions from the \texttt{readr} package

\begin{Shaded}
\begin{Highlighting}[]
\CommentTok{\# readr is part of tidyverse }
\FunctionTok{library}\NormalTok{(tidyverse) }\CommentTok{\# or alternatively }
\FunctionTok{library}\NormalTok{(readr)}
\end{Highlighting}
\end{Shaded}

Some available functions:

\begin{itemize}
\item
  \texttt{read\_csv()}: comma separated (CSV) files
\item
  \texttt{read\_tsv()}: tab separated files
\item
  \texttt{read\_delim()}: general delimited files
\item
  \texttt{read\_fwf()}: fixed width files
\item
  \texttt{read\_table()}: tabular files where columns are separated by
  white-space. read\_log(): web log files
\end{itemize}

\begin{quote}
Full documentation of the package is available through this
\href{https://www.rdocumentation.org/packages/readr/versions/1.3.1}{link}.
\end{quote}

\hypertarget{usage}{%
\paragraph{Usage}\label{usage}}

\begin{itemize}
\item
  Read with predifined column types

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{myiris2 }\OtherTok{=}
	\FunctionTok{read\_csv}\NormalTok{(}\StringTok{"../data/talk03/iris.csv"}\NormalTok{, }
           \AttributeTok{col\_types =} 
           	\FunctionTok{cols}\NormalTok{( }
              \AttributeTok{Sepal.Length =} \FunctionTok{col\_double}\NormalTok{(),}
              \AttributeTok{Sepal.Width =} \FunctionTok{col\_double}\NormalTok{(),}
              \AttributeTok{Petal.Length =} \FunctionTok{col\_double}\NormalTok{(),}
              \AttributeTok{Petal.Width =} \FunctionTok{col\_double}\NormalTok{(),}
              \AttributeTok{Species =} \FunctionTok{col\_character}\NormalTok{() }
\NormalTok{            )}
\NormalTok{          )}
\end{Highlighting}
\end{Shaded}
\end{itemize}

\begin{itemize}
\item
  To read from other formats, you can try the following packages:

  \begin{quote}
  Similar to Python
  \end{quote}

  \begin{itemize}
  \item
    \texttt{haven} - SPSS, Stata, and SAS files
  \item
    \texttt{readxl} - excel files (.xls and .xlsx) DBI - databases
  \item
    \texttt{jsonlite} - json
  \item
    \texttt{xml2} - XML
  \item
    \texttt{httr} - Web APIs
  \item
    \texttt{rvest} - HTML (Web Scraping)
  \end{itemize}
\end{itemize}

\hypertarget{write-to-files}{%
\subsubsection{Write to files}\label{write-to-files}}

Use the following functions to write object(s) to external files:

\begin{quote}
Default parameters are listed.

More related documents can be found in this
\href{https://r4ds.had.co.nz/data-import.html?q=file\#writing-to-a-file}{link}.
\end{quote}

\begin{itemize}
\item
  Comma delimited file:

\begin{Shaded}
\begin{Highlighting}[]
\FunctionTok{write\_csv}\NormalTok{(}
\NormalTok{  x, }
\NormalTok{  path, }
  \AttributeTok{na =}\NormalTok{ “NA”, }
  \AttributeTok{append =} \ConstantTok{FALSE}\NormalTok{, }
  \AttributeTok{col\_names =} \SpecialCharTok{!}\NormalTok{append}
\NormalTok{) }
\end{Highlighting}
\end{Shaded}
\item
  File with arbitrary delimiter:

\begin{Shaded}
\begin{Highlighting}[]
\FunctionTok{write\_delim}\NormalTok{(}
\NormalTok{  x, }
\NormalTok{  path, }
  \AttributeTok{delim =}\NormalTok{ ” “, }
  \AttributeTok{na =}\NormalTok{”NA”, }
  \AttributeTok{append =} \ConstantTok{FALSE}\NormalTok{, }
  \AttributeTok{col\_names =} \SpecialCharTok{!}\NormalTok{append}
\NormalTok{)}
\end{Highlighting}
\end{Shaded}
\item
  CSV for excel:

\begin{Shaded}
\begin{Highlighting}[]
\FunctionTok{write\_excel\_csv}\NormalTok{(}
\NormalTok{  x, }
\NormalTok{  path, }
  \AttributeTok{na =}\NormalTok{ “NA”, }
  \AttributeTok{append =} \ConstantTok{FALSE}\NormalTok{,}
  \AttributeTok{col\_names =} \SpecialCharTok{!}\NormalTok{append}
\NormalTok{) }
\end{Highlighting}
\end{Shaded}
\item
  String to file:

\begin{Shaded}
\begin{Highlighting}[]
\FunctionTok{write\_file}\NormalTok{(}
\NormalTok{  x,}
\NormalTok{  path, }
  \AttributeTok{append =} \ConstantTok{FALSE}
\NormalTok{)}
\end{Highlighting}
\end{Shaded}
\item
  String vector to file, one element per line:

\begin{Shaded}
\begin{Highlighting}[]
\FunctionTok{write\_lines}\NormalTok{(}
\NormalTok{  x,}
\NormalTok{  path,}
  \AttributeTok{na =}\NormalTok{ “NA”, }
  \AttributeTok{append =} \ConstantTok{FALSE}
\NormalTok{) }
\end{Highlighting}
\end{Shaded}
\item
  Object to RDS file:

\begin{Shaded}
\begin{Highlighting}[]
\FunctionTok{write\_rds}\NormalTok{(}
\NormalTok{  x,}
\NormalTok{  path, }
  \AttributeTok{compress =} 
  	\FunctionTok{c}\NormalTok{(}
\NormalTok{      “none”,}
\NormalTok{      “gz”,}
\NormalTok{      “bz2”,}
\NormalTok{      “xz”}
\NormalTok{    ),}
\NormalTok{  ...}
\NormalTok{)}
\end{Highlighting}
\end{Shaded}
\item
  Tab delimited files:

\begin{Shaded}
\begin{Highlighting}[]
\FunctionTok{write\_tsv}\NormalTok{(}
\NormalTok{  x, }
\NormalTok{  path, }
  \AttributeTok{na =}\NormalTok{ “NA”, }
  \AttributeTok{append =} \ConstantTok{FALSE}\NormalTok{, }
  \AttributeTok{col\_names =} \SpecialCharTok{!}\NormalTok{append}
\NormalTok{)}
\end{Highlighting}
\end{Shaded}
\end{itemize}

\hypertarget{r-language-basics-part-3-factor}{%
\section{R language basics, part 3:
factor}\label{r-language-basics-part-3-factor}}

\begin{quote}
Talk 04

View the original slide through \href{../talk04.pdf}{this link}.

View the original R markdown file of the slide through
\href{../talk04.Rmd}{this link}.
\end{quote}

\hypertarget{io-and-working-enviroment-management}{%
\subsection{IO and working enviroment
management}\label{io-and-working-enviroment-management}}

Each R session is a separate \textbf{work space} containing its own
data, variables, and operation history.

\includegraphics{/Users/lucas/Library/Mobile Documents/com~apple~CloudDocs/~~aa Study Materials/Grade 2 I/Learning/R for Data Science/R-for-Data-Science/Review/image/r_sessions.png}

Each RStudio session is automatically associated with a R session

\begin{quote}
Not only RStudio, PyCharm or VSCode also support R session.

However, I'm keen on coding with PyCharm but not RStudio, for its
wonderful Plug-in Environment, which can let me use plug-ins such as
Code GeeX by Zhipu AI (a company founded by some student in KEG team
inTsinghua University) or GitHub Copilot by GitHub to let the coding
process more quickly, for the instruction from GPTs.
\end{quote}

\includegraphics{/Users/lucas/Library/Mobile Documents/com~apple~CloudDocs/~~aa Study Materials/Grade 2 I/Learning/R for Data Science/R-for-Data-Science/Review/image/r_session_in_rstudio.png}

If you want to coding with R using PyCharm or other JetBrains IDE (i.e.
IntelliJ, CLion, etc.), remember to install the \emph{R Language
Plug-in}

\includegraphics{/Users/lucas/Library/Mobile Documents/com~apple~CloudDocs/~~aa Study Materials/Grade 2 I/Learning/R for Data Science/R-for-Data-Science/Review/image/image-20231202111619635.png}

For instruction how to get FREE Student Lisence of GitHub Pro, GitHub
Copilot and JetBrains Products and their benefits, see their official
website:

\begin{itemize}
\item
  \href{https://campus.github.com}{GitHub Global Campus}

  Make sure you don't use VPNs and use your phone to log in and apply
  (HUST Campus Network is recommended), give ``Precise Location''
  permission to your browser. You may use your ``{[}Student
  Number{]}@hust.edu.cn'' mail to verify your identity as a student
  studying in HUST.
\item
  \href{https://www.jetbrains.com/lp/leaflets-gdc/students/}{JetBrains
  Products}

  Because our email addresses ending with ``@hust.edu.cn'' are banned
  due to misuse, you should apply for an online verification report on
  \href{chsi.com.cn}{CHSI} (press the link to visit the website),
  instructions \href{https://www.chsi.com.cn/xlcx/rhsq.jsp}{here}.
\end{itemize}

\hypertarget{start-a-new-rstudio-session-by-creating-a-new-project}{%
\subsubsection{Start a new RStudio session by creating a new
project}\label{start-a-new-rstudio-session-by-creating-a-new-project}}

\begin{quote}
To start a new session in PyCharm, simply press the bottom corner and
select a new session.
\end{quote}

\begin{itemize}
\item
  Click the Project button in the upper right corner and select New
  Project in the pop-up menu \ldots{}

  \includegraphics{/Users/lucas/Library/Mobile Documents/com~apple~CloudDocs/~~aa Study Materials/Grade 2 I/Learning/R for Data Science/R-for-Data-Science/Review/image/rstudio_create_new_project.png}
\item
  Select: New directory -\textgreater{} New Project in the popup window

  \includegraphics{/Users/lucas/Library/Mobile Documents/com~apple~CloudDocs/~~aa Study Materials/Grade 2 I/Learning/R for Data Science/R-for-Data-Science/Review/image/rstudio_create_project_2.png}
\item
  Enter a new directory name, choose its mother directory ...

  \includegraphics{/Users/lucas/Library/Mobile Documents/com~apple~CloudDocs/~~aa Study Materials/Grade 2 I/Learning/R for Data Science/R-for-Data-Science/Review/image/rstudio_create_new_project_3.png}
\end{itemize}

\hypertarget{working-space}{%
\subsubsection{Working Space}\label{working-space}}

Current workspace, including all loaded data, packets and homebrew
functions.

Variables can be managed with the following code:

\begin{Shaded}
\begin{Highlighting}[]
\FunctionTok{ls}\NormalTok{() }\CommentTok{\# Show all the variables in current workspace/session}
\FunctionTok{rm}\NormalTok{(x) }\CommentTok{\# Remove a variable}
\FunctionTok{rm}\NormalTok{(}\AttributeTok{list =} \FunctionTok{ls}\NormalTok{()) }\CommentTok{\# Remove ALL variables in current workspace/session}
\end{Highlighting}
\end{Shaded}

\hypertarget{variables-in-working-space-in-rstudio}{%
\subsubsection{Variables in working space in
RStudio}\label{variables-in-working-space-in-rstudio}}

The "Environment" window in the upper right corner of RStudio shows all
the variables of the current workspace.

\includegraphics{/Users/lucas/Library/Mobile Documents/com~apple~CloudDocs/~~aa Study Materials/Grade 2 I/Learning/R for Data Science/R-for-Data-Science/Review/image/rstudio_enviroment_window.png}

\hypertarget{save-and-restore-work-space}{%
\subsubsection{Save and restore work
space}\label{save-and-restore-work-space}}

\begin{Shaded}
\begin{Highlighting}[]
\CommentTok{\# Save all loaded variables into an external .RData file}
\FunctionTok{save.image}\NormalTok{(}\AttributeTok{file =} \StringTok{"prj\_r\_for\_bioinformatics\_aug3\_2019.RData"}\NormalTok{) }
\CommentTok{\# Restore (load) saved work space}
\FunctionTok{load}\NormalTok{(}\AttributeTok{file =} \StringTok{"prj\_r\_for\_bioinformatics\_aug3\_2019.RData"}\NormalTok{)}
\end{Highlighting}
\end{Shaded}

\textbf{Notes:}

\begin{itemize}
\item
  Existing variables will be kept, however, those will the same names
  will be replaced by loaded variables
\item
  Please consider using \texttt{rm(list=ls())} to remove all existing
  variables to have a clean start
\item
  You may need to reload all the packages
\end{itemize}

\hypertarget{save-selected-variables}{%
\subsubsection{Save selected variables}\label{save-selected-variables}}

Sometimes you need to transfer processed data to a collaborator ...

\begin{Shaded}
\begin{Highlighting}[]
\CommentTok{\# Save selected variables to external}
\FunctionTok{save}\NormalTok{(}
\NormalTok{  city, }
\NormalTok{  country, }
  \AttributeTok{file=}\StringTok{"1.RData"}
\NormalTok{)}
\CommentTok{\# You can specify directory name}
\FunctionTok{load}\NormalTok{(}\StringTok{"1.RData"}\NormalTok{)}
\end{Highlighting}
\end{Shaded}

\hypertarget{close-and-reopen-a-project}{%
\subsubsection{Close and (re)open a
project}\label{close-and-reopen-a-project}}

\begin{itemize}
\item
  To close a project

  \includegraphics{/Users/lucas/Library/Mobile Documents/com~apple~CloudDocs/~~aa Study Materials/Grade 2 I/Learning/R for Data Science/R-for-Data-Science/Review/image/Rstudio_close_a_project.png}
\item
  In RStudio and similar IDEs, there are some preferences to choose

  \includegraphics{/Users/lucas/Library/Mobile Documents/com~apple~CloudDocs/~~aa Study Materials/Grade 2 I/Learning/R for Data Science/R-for-Data-Science/Review/image/rstudio_project_options.png}
\end{itemize}

\begin{quote}
The UI in PyCharm
\end{quote}

\includegraphics{/Users/lucas/Library/Mobile Documents/com~apple~CloudDocs/~~aa Study Materials/Grade 2 I/Learning/R for Data Science/R-for-Data-Science/Review/image/pycharm_project_options.png}

\textbf{Notes:}

\begin{itemize}
\item
  Save on exit
\item
  Load on opening
\item
  When the data is large, the loading time may be too long ...
\end{itemize}

\hypertarget{open-a-project}{%
\subsubsection{Open a project}\label{open-a-project}}

\includegraphics{/Users/lucas/Library/Mobile Documents/com~apple~CloudDocs/~~aa Study Materials/Grade 2 I/Learning/R for Data Science/R-for-Data-Science/Review/image/rstudio_open_a_project.png}

\begin{quote}
When in PyCharm, simply drag the working directory to its main window,
remember to trust the project.
\end{quote}

\hypertarget{factors}{%
\subsection{Factors}\label{factors}}

Factor is a data structure used for fields that takes only predefined,
finite number of values (categorical data).

It will limit the selection of input data.

\hypertarget{play-around-with-levels}{%
\subsubsection{\texorpdfstring{Play around with
\texttt{levels()}}{Play around with levels()}}\label{play-around-with-levels}}

Here are instructions of modifying factor levels

\begin{quote}
Based on the textbook
\end{quote}

The levels are terse and inconsistent. Let's tweak them to be longer and
use a parallel construction. Like most rename and recoding functions in
the tidyverse, the new values go on the left and the old values go on
the right:

\begin{Shaded}
\begin{Highlighting}[]
\FunctionTok{load}\NormalTok{(gss\_cat)}

\FunctionTok{mutate}\NormalTok{(}
  \AttributeTok{partyid =} \FunctionTok{fct\_recode}\NormalTok{(partyid,}
    \StringTok{"Republican, strong"}    \OtherTok{=} \StringTok{"Strong republican"}\NormalTok{,}
    \StringTok{"Republican, weak"}      \OtherTok{=} \StringTok{"Not str republican"}\NormalTok{,}
    \StringTok{"Independent, near rep"} \OtherTok{=} \StringTok{"Ind,near rep"}\NormalTok{,}
    \StringTok{"Independent, near dem"} \OtherTok{=} \StringTok{"Ind,near dem"}\NormalTok{,}
    \StringTok{"Democrat, weak"}        \OtherTok{=} \StringTok{"Not str democrat"}\NormalTok{,}
    \StringTok{"Democrat, strong"}      \OtherTok{=} \StringTok{"Strong democrat"}
\NormalTok{  )}
\NormalTok{) }

\FunctionTok{count}\NormalTok{(partyid)}

\CommentTok{\#\textgreater{} \# A tibble: 10 × 2}
\CommentTok{\#\textgreater{}   partyid                   n}
\CommentTok{\#\textgreater{}   \textless{}fct\textgreater{}                 \textless{}int\textgreater{}}
\CommentTok{\#\textgreater{} 1 No answer               154}
\CommentTok{\#\textgreater{} 2 Don\textquotesingle{}t know                1}
\CommentTok{\#\textgreater{} 3 Other party             393}
\CommentTok{\#\textgreater{} 4 Republican, strong     2314}
\CommentTok{\#\textgreater{} 5 Republican, weak       3032}
\CommentTok{\#\textgreater{} 6 Independent, near rep  1791}
\CommentTok{\#\textgreater{} \# ℹ 4 more rows}
\end{Highlighting}
\end{Shaded}

Use this technique with care: if you group together categories that are
truly different you will end up with misleading results.

The order of the \texttt{levels} determines the sorting order.

\hypertarget{use-factor-to-clean-data}{%
\subsubsection{Use factor to clean
data}\label{use-factor-to-clean-data}}

\begin{quote}
Usage of \texttt{fct\_xxx()} functions.
\end{quote}

Suppose I have a set of gender data that is written in a very irregular
way:

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{gender }\OtherTok{=}
	\FunctionTok{c}\NormalTok{(}\StringTok{"f"}\NormalTok{, }\StringTok{"m "}\NormalTok{, }\StringTok{"male "}\NormalTok{,}\StringTok{"male"}\NormalTok{, }\StringTok{"female"}\NormalTok{, }\StringTok{"FEMALE"}\NormalTok{, }\StringTok{"Male"}\NormalTok{, }\StringTok{"f"}\NormalTok{, }\StringTok{"m"}\NormalTok{)}

\NormalTok{gender\_fct }\OtherTok{=}
  \FunctionTok{as.factor}\NormalTok{(gender)}

\FunctionTok{fct\_count}\NormalTok{(gender\_fct)}
\end{Highlighting}
\end{Shaded}

The output looks like this:

\includegraphics{/Users/lucas/Library/Mobile Documents/com~apple~CloudDocs/~~aa Study Materials/Grade 2 I/Learning/R for Data Science/R-for-Data-Science/Review/image/image-20231202114121080.png}

Now I request to replace with Female, Male.

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{gender\_fct }\OtherTok{=}
  \FunctionTok{fct\_collapse}\NormalTok{(}
\NormalTok{    gender,}
    \AttributeTok{Female =} \FunctionTok{c}\NormalTok{(}\StringTok{"f"}\NormalTok{, }\StringTok{"female"}\NormalTok{, }\StringTok{"FEMALE"}\NormalTok{),}
    \AttributeTok{Male =} \FunctionTok{c}\NormalTok{(}\StringTok{"m "}\NormalTok{, }\StringTok{"m"}\NormalTok{, }\StringTok{"male "}\NormalTok{, }\StringTok{"male"}\NormalTok{, }\StringTok{"Male"}\NormalTok{)}
\NormalTok{  )}

\FunctionTok{fct\_count}\NormalTok{(gender\_fct)}
\end{Highlighting}
\end{Shaded}

\includegraphics{/Users/lucas/Library/Mobile Documents/com~apple~CloudDocs/~~aa Study Materials/Grade 2 I/Learning/R for Data Science/R-for-Data-Science/Review/image/image-20231202114937281.png}

You can also use \texttt{fct\_relabel()} to do the same thing

\begin{Shaded}
\begin{Highlighting}[]
\FunctionTok{fct\_relabel}\NormalTok{(}
\NormalTok{  gender,}
  \SpecialCharTok{\textasciitilde{}} \FunctionTok{ifelse}\NormalTok{(}
    \FunctionTok{tolower}\NormalTok{(}
      \FunctionTok{substring}\NormalTok{(., }\DecValTok{1}\NormalTok{, }\DecValTok{1}\NormalTok{)) }\SpecialCharTok{==} \StringTok{"f"}\NormalTok{,}
    \StringTok{"Female"}\NormalTok{,}
    \StringTok{"Male"}
\NormalTok{  )}
\NormalTok{)}
\end{Highlighting}
\end{Shaded}

\hypertarget{usage-of-factors-in-drawing-plots}{%
\subsubsection{Usage of factors in drawing
plots}\label{usage-of-factors-in-drawing-plots}}

\begin{Shaded}
\begin{Highlighting}[]
\FunctionTok{library}\NormalTok{(ggplot2)}

\NormalTok{responses }\OtherTok{=}
  \FunctionTok{factor}\NormalTok{(}
    \FunctionTok{c}\NormalTok{(}\StringTok{"Agree"}\NormalTok{, }\StringTok{"Agree"}\NormalTok{, }\StringTok{"Strongly Agree"}\NormalTok{, }\StringTok{"Disagree"}\NormalTok{, }\StringTok{"Disagree"}\NormalTok{, }\StringTok{"Agree"}\NormalTok{)}
\NormalTok{  )}

\NormalTok{response\_barplot }\OtherTok{=}
  \FunctionTok{ggplot}\NormalTok{(}
    \AttributeTok{data =} \FunctionTok{data.frame}\NormalTok{(responses),}
    \FunctionTok{aes}\NormalTok{(}\AttributeTok{x =}\NormalTok{ responses)}
\NormalTok{  ) }\SpecialCharTok{+}
  \FunctionTok{geom\_bar}\NormalTok{()}
\end{Highlighting}
\end{Shaded}

\includegraphics{/Users/lucas/Library/Mobile Documents/com~apple~CloudDocs/~~aa Study Materials/Grade 2 I/Learning/R for Data Science/R-for-Data-Science/Review/image/response_barplot.png}

By default, \texttt{factor} is sorted alphabetically.

\texttt{ggplot2} also plots \texttt{factor} in that order, so you can
adjust the \texttt{factor} to adjust the drawing order.

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{res }\OtherTok{=}
  \FunctionTok{data.frame}\NormalTok{(responses)}
\CommentTok{\# Sort by level of agreement from strong {-}\textgreater{} weak}
\NormalTok{res}\SpecialCharTok{$}\NormalTok{res }\OtherTok{=}
  \FunctionTok{factor}\NormalTok{(}
\NormalTok{    res}\SpecialCharTok{$}\NormalTok{res,}
    \AttributeTok{levels =}
       \FunctionTok{c}\NormalTok{(}\StringTok{"Strongly Agree"}\NormalTok{, }\StringTok{"Agree"}\NormalTok{, }\StringTok{"Disagree"}\NormalTok{)}
\NormalTok{  )}

\NormalTok{response\_barplot2 }\OtherTok{=}
  \FunctionTok{ggplot}\NormalTok{(}
    \AttributeTok{data =}\NormalTok{ res,}
    \FunctionTok{aes}\NormalTok{(}\AttributeTok{x =}\NormalTok{ res)}
\NormalTok{  ) }\SpecialCharTok{+}
  \FunctionTok{geom\_bar}\NormalTok{() }\SpecialCharTok{+}
  \FunctionTok{xlab}\NormalTok{(}\StringTok{"Response"}\NormalTok{)}
\end{Highlighting}
\end{Shaded}

\includegraphics{/Users/lucas/Library/Mobile Documents/com~apple~CloudDocs/~~aa Study Materials/Grade 2 I/Learning/R for Data Science/R-for-Data-Science/Review/image/response_barplot2.png}

You can also use the parameter \texttt{ordered} to let others know that
your \texttt{factor} is ordered properly.

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{responses }\OtherTok{=}
  \FunctionTok{factor}\NormalTok{(}
    \FunctionTok{c}\NormalTok{(}\StringTok{"Agree"}\NormalTok{, }\StringTok{"Agree"}\NormalTok{, }\StringTok{"Strongly Agree"}\NormalTok{, }\StringTok{"Disagree"}\NormalTok{, }\StringTok{"Disagree"}\NormalTok{, }\StringTok{"Agree"}\NormalTok{),}
    \AttributeTok{ordered =} \ConstantTok{TRUE}
\NormalTok{  )}
\end{Highlighting}
\end{Shaded}

\includegraphics{/Users/lucas/Library/Mobile Documents/com~apple~CloudDocs/~~aa Study Materials/Grade 2 I/Learning/R for Data Science/R-for-Data-Science/Review/image/image-20231202134409231.png}

\hypertarget{using-factor-to-vhange-values}{%
\subsubsection{\texorpdfstring{Using \texttt{factor} to vhange
values}{Using factor to vhange values}}\label{using-factor-to-vhange-values}}

You can use \texttt{recode()} in \texttt{dplyr} package to change
\texttt{value}

\texttt{dplyr} is a grammar of data manipulation, providing a consistent
set of verbs that help you solve the most common data manipulation
challenges:

\begin{itemize}
\item
  \texttt{mutate()} adds new variables that are functions of existing
  variables
\item
  \texttt{select()} picks variables based on their names.
\item
  \texttt{filter()} picks cases based on their values.
\item
  \texttt{summarise()} reduces multiple values down to a single summary.
\item
  \texttt{arrange()} changes the ordering of the rows.
\end{itemize}

These all combine naturally with \texttt{group\_by()} which allows you
to perform any operation ``by group''. You can learn more about them in
\texttt{vignette("dplyr")}. As well as these single-table verbs, dplyr
also provides a variety of two-table verbs, which you can learn about in
\texttt{vignette("two-table")}.

\begin{quote}
Based on the introduction on the
\href{https://dplyr.tidyverse.org}{official website} of \texttt{dplyr}.
\end{quote}

Here's an example:

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{x }\OtherTok{=}
  \FunctionTok{factor}\NormalTok{(}
    \FunctionTok{c}\NormalTok{(}\StringTok{"alpha"}\NormalTok{, }\StringTok{"beta"}\NormalTok{, }\StringTok{"gamma"}\NormalTok{, }\StringTok{"theta"}\NormalTok{, }\StringTok{"beta"}\NormalTok{, }\StringTok{"alpha"}\NormalTok{)}
\NormalTok{  )}

\NormalTok{x }\OtherTok{=}
  \FunctionTok{recode}\NormalTok{(}
\NormalTok{    x,}
    \AttributeTok{alpha =} \StringTok{"a"}\NormalTok{,}
    \AttributeTok{beta =} \StringTok{"b"}\NormalTok{,}
    \AttributeTok{gamma =} \StringTok{"c"}\NormalTok{,}
    \AttributeTok{theta =} \StringTok{"d"}
\NormalTok{  )}
\end{Highlighting}
\end{Shaded}

\includegraphics{/Users/lucas/Library/Mobile Documents/com~apple~CloudDocs/~~aa Study Materials/Grade 2 I/Learning/R for Data Science/R-for-Data-Science/Review/image/image-20231202135555790.png}

\hypertarget{delete-useless-levels}{%
\subsubsection{\texorpdfstring{Delete useless
\texttt{levels}}{Delete useless levels}}\label{delete-useless-levels}}

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{mouse.genes }\OtherTok{=}
  \FunctionTok{read.delim}\NormalTok{(}
    \AttributeTok{file =} \StringTok{"data/talk04/mouse\_genes\_biomart\_sep2018.txt"}\NormalTok{,}
    \AttributeTok{sep =} \StringTok{"}\SpecialCharTok{\textbackslash{}t}\StringTok{"}\NormalTok{,}
    \AttributeTok{header =}\NormalTok{ T, }
    \AttributeTok{stringsAsFactors =}\NormalTok{ T }
\NormalTok{  )}
\end{Highlighting}
\end{Shaded}

\includegraphics{/Users/lucas/Library/Mobile Documents/com~apple~CloudDocs/~~aa Study Materials/Grade 2 I/Learning/R for Data Science/R-for-Data-Science/Review/image/image-20231202135803901.png}

If you draw a plot without deleting the useless \texttt{levels}, you
will get this result:

\includegraphics{/Users/lucas/Library/Mobile Documents/com~apple~CloudDocs/~~aa Study Materials/Grade 2 I/Learning/R for Data Science/R-for-Data-Science/Review/image/mouse_gene_plot01.png}

But when you delete the useless \texttt{level} using these commands:

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{mouse.chr\_10\_12}\SpecialCharTok{$}\NormalTok{Chromosome.scaffold.name }\OtherTok{=}
  \FunctionTok{droplevels}\NormalTok{(mouse.chr\_10\_12}\SpecialCharTok{$}\NormalTok{Chromosome.scaffold.name)}
\end{Highlighting}
\end{Shaded}

You will see that:

\includegraphics{/Users/lucas/Library/Mobile Documents/com~apple~CloudDocs/~~aa Study Materials/Grade 2 I/Learning/R for Data Science/R-for-Data-Science/Review/image/image-20231202141212937.png}

Then, you'll get the plot like this:

\includegraphics{/Users/lucas/Library/Mobile Documents/com~apple~CloudDocs/~~aa Study Materials/Grade 2 I/Learning/R for Data Science/R-for-Data-Science/Review/image/mouse_gene_plot02.png}

\emph{Source code:}

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{mouse\_gene\_plot02 }\OtherTok{=}
  \FunctionTok{ggplot}\NormalTok{(}
\NormalTok{    mouse.chr\_10\_12,}
    \FunctionTok{aes}\NormalTok{(}
      \AttributeTok{x =}\NormalTok{ Chromosome.scaffold.name,}
      \AttributeTok{y =}\NormalTok{ Transcript.length..including.UTRs.and.CDS.}
\NormalTok{    )}
\NormalTok{  ) }\SpecialCharTok{+}
  \FunctionTok{geom\_boxplot}\NormalTok{() }\SpecialCharTok{+}
  \FunctionTok{labs}\NormalTok{(}
    \AttributeTok{x =} \StringTok{"Chromosome Scaffold Name"}\NormalTok{,}
    \AttributeTok{y =} \StringTok{"Transcript Length (including UTRs and CDS)"}
\NormalTok{  )}
\end{Highlighting}
\end{Shaded}

You can also use \texttt{tibble} to solve these problems:

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{mouse.tibble }\OtherTok{=}
  \FunctionTok{read\_delim}\NormalTok{(}
    \AttributeTok{file =} \StringTok{"data/talk04/mouse\_genes\_biomart\_sep2018.txt"}\NormalTok{,}
    \AttributeTok{delim =} \StringTok{"}\SpecialCharTok{\textbackslash{}t}\StringTok{"}\NormalTok{,}
    \AttributeTok{quote =} \StringTok{""}\NormalTok{,}
    \AttributeTok{show\_col\_types =} \ConstantTok{FALSE}
\NormalTok{  )}

\NormalTok{mouse.tibble.chr10\_12 }\OtherTok{=}
\NormalTok{  mouse.tibble }\SpecialCharTok{\%\textgreater{}\%} \FunctionTok{filter}\NormalTok{(}
    \StringTok{\textasciigrave{}}\AttributeTok{Chromosome/scaffold name}\StringTok{\textasciigrave{}} \SpecialCharTok{\%in\%} \FunctionTok{c}\NormalTok{(}\StringTok{"10"}\NormalTok{, }\StringTok{"11"}\NormalTok{, }\StringTok{"12"}\NormalTok{))}


\NormalTok{mouse\_gene\_plot03 }\OtherTok{=}
    \FunctionTok{ggplot}\NormalTok{(}
\NormalTok{        mouse.tibble.chr10\_12,}
        \FunctionTok{aes}\NormalTok{(}
        \AttributeTok{x =}\NormalTok{ Chromosome.scaffold.name,}
        \AttributeTok{y =}\NormalTok{ Transcript.length..including.UTRs.and.CDS.}
\NormalTok{        )}
\NormalTok{    ) }\SpecialCharTok{+}
    \FunctionTok{geom\_boxplot}\NormalTok{() }\SpecialCharTok{+}
    \FunctionTok{labs}\NormalTok{(}
        \AttributeTok{x =} \StringTok{"Chromosome"}\NormalTok{,}
        \AttributeTok{y =} \StringTok{"Transcript length (bp)"}
\NormalTok{    ) }\SpecialCharTok{+}
    \FunctionTok{coord\_flip}\NormalTok{() }\SpecialCharTok{+}
    \FunctionTok{ylim}\NormalTok{(}\DecValTok{0}\NormalTok{, }\DecValTok{2500}\NormalTok{) }\SpecialCharTok{+}
    \FunctionTok{theme\_bw}\NormalTok{()}
\end{Highlighting}
\end{Shaded}

\includegraphics{/Users/lucas/Library/Mobile Documents/com~apple~CloudDocs/~~aa Study Materials/Grade 2 I/Learning/R for Data Science/R-for-Data-Science/Review/image/mouse_gene_plot03.png}

\hypertarget{advance-usage}{%
\subsubsection{Advance usage}\label{advance-usage}}

\begin{itemize}
\item
  Use \texttt{reorder()} function to reorder the level.

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{x }\OtherTok{=} \FunctionTok{reorder}\NormalTok{( }
  \StringTok{\textasciigrave{}}\AttributeTok{Chromosome/scaffold name}\StringTok{\textasciigrave{}}\NormalTok{,}
  \StringTok{\textasciigrave{}}\AttributeTok{Transcript length (including UTRs and CDS)}\StringTok{\textasciigrave{}}\NormalTok{,}
\NormalTok{  median}
\NormalTok{)}
\end{Highlighting}
\end{Shaded}
\end{itemize}

\begin{itemize}
\item
  Use \texttt{forcats::fct\_reorder()} to reorder factors

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{x }\OtherTok{=} \FunctionTok{fct\_reorder}\NormalTok{( }
  \StringTok{\textasciigrave{}}\AttributeTok{Chromosome/scaffold name}\StringTok{\textasciigrave{}}\NormalTok{,}
  \StringTok{\textasciigrave{}}\AttributeTok{Transcript length (including UTRs and CDS)}\StringTok{\textasciigrave{}}\NormalTok{,}
\NormalTok{  median }
\NormalTok{)}
\end{Highlighting}
\end{Shaded}
\end{itemize}

\end{document}
